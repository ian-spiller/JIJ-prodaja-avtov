<html>
<head>
</head>
<body>
    <p id="seznam_znamk" style="display: none">
        %heck=str(znamkeid[1][1])
        %for x in znamkeid[2:]:
        %heck=heck+ "," + str(x[1]) 
        %end     
            {{heck}}
    </p>
    <form action="/rezultati" method="get">
        <label for="znamka">Znamka:</label>
        <select name="znamka" id="znamka" onchange='isci()'>    
            %for x in znamkeid:        
                <option value="{{x[1]}}">{{x[1]}}</option>
            %end
        </select>

        <span> Cena do:</span> <input name="cena" type="number" />

        <label for="stanje">Stanje:</label>
        <select name="stanje" id="stanje">
            <option value="Vse">Vse</option>
            <option value="rabljeno">Rabljeno</option>
            <option value="novo">Novo</option>
            <option value="testno">Testno</option>
        </select>

        <label for="oblika">Oblika:</label>
        <select name="oblika" id="oblika">
            <option value="Vse">Vse</option>
            <option value="SUV">SUV</option>
            <option value="limuzina">Limuzina</option>
            <option value="karavan">Karavan</option>
            <option value="coupe">Coupe</option>
            <option value="kabrijolet">Kabrijolet</option>
        </select>

        <span> Kilometri:</span> <input name="kilometri" type="number" />

        <label for="gorivo">Gorivo:</label>
        <select name="gorivo" id="gorivo">
            <option value="Vse">Vse</option>
            <option value="bencin">Bencin</option>
            <option value="dizel">Dizel</option>
            <option value="hibrid">Hibrid</option>
            <option value="elektrika">Elektrika</option>
        </select>
        
        <span> Letnik:</span> <input name="letnik" type="number" />
        
        %for x in znamkeid[1:]:
        <select name="model{{x[1]}}" id="model{{x[1]}}" style="display: none"> 
            %for y in seznam_modelov:
                %if y[0]==x[0]:      
                    <option value="{{y[1]}}">{{y[1]}}</option>
                %end
            %end
        </select>
        %end
        
        <script type="text/javascript">
            'use strict'
            function isci() {
                let znamke = document.getElementById('znamka').value;
                let seznam_znamk = document.getElementById('seznam_znamk').innerHTML;
                let seznam_heck = (seznam_znamk.trim()).split(",");
                console.log(seznam_heck)
                for (let i = 0, len = seznam_heck.length; i < len; i++) {
                    if (znamke == seznam_heck[i]) {
                        console.log(seznam_heck[i])
                        for (let j = 0, len = seznam_heck.length; j < len; j++) {
                            if (seznam_heck[i] !=seznam_heck[j] ) {
                                document.getElementById(`model${seznam_heck[j]}`).style.display = "none";
                                console.log(`model${seznam_heck[j]}`)
                            }
                            else{
                                document.getElementById(`model${seznam_heck[j]}`).style.display = "block";
                            }
                        }
                    }
                }
            }
        </script>

<input value = "Išči" type="submit" />
</form>

</body>
</html> 
